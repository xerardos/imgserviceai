---
// Quiz.astro
import { useTranslations } from '../i18n/ui';

const { lang } = Astro.props;
const t = useTranslations(lang);
---
<div id="componente-quiz">
<section class="quiz-section">
  <h2>{t('quiz_title')}</h2>
  <p>{t('quiz_subtitle')}</p>
  <div class="quiz-container">
    <div class="quiz-step active" data-step="1">
      <h3>{t('quiz_step1_question')}</h3>
      <div class="quiz-options">
        <button class="quiz-option" data-next-step="2">{t('quiz_step1_option1')}</button>
        <button class="quiz-option" data-next-step="2">{t('quiz_step1_option2')}</button>
        <button class="quiz-option" data-next-step="2">{t('quiz_step1_option3')}</button>
        <button class="quiz-option" data-next-step="2">{t('quiz_step1_option4')}</button>
      </div>
    </div>
    <div class="quiz-step" data-step="2">
      <h3>{t('quiz_step2_question')}</h3>
      <div class="quiz-options">
        <button class="quiz-option" data-next-step="3">{t('quiz_step2_option1')}</button>
        <button class="quiz-option" data-next-step="3">{t('quiz_step2_option2')}</button>
        <button class="quiz-option" data-next-step="3">{t('quiz_step2_option3')}</button>
        <button class="quiz-option" data-next-step="3">{t('quiz_step2_option4')}</button>
      </div>
    </div>
    <div class="quiz-step" data-step="3">
      <h3>{t('quiz_step3_question')}</h3>
      <div class="quiz-options">
        <button class="quiz-option" data-next-step="result">{t('quiz_step3_option1')}</button>
        <button class="quiz-option" data-next-step="result">{t('quiz_step3_option2')}</button>
        <button class="quiz-option" data-next-step="result">{t('quiz_step3_option3')}</button>
      </div>
    </div>
    <div class="quiz-step" data-step="result">
      <h3>{t('quiz_result_title')}</h3>
      <div class="quiz-result">
        <p>{t('quiz_result_description')}</p>
        <h4 class="recommended-package">{t('quiz_result_package_name')}</h4>
        <a href="#" class="cta-primary">{t('quiz_result_cta')}</a>
      </div>
    </div>
  </div>
</section>

<style>
  .quiz-section {
    padding: 4rem 2rem;
    text-align: center;
  }
  .quiz-section h2 {
    font-size: 2.5rem;
    color: #FFD700;
    margin-bottom: 1rem;
  }
  .quiz-container {
    max-width: 700px;
    margin: 2rem auto;
    background: #13151a;
    padding: 2rem;
    border-radius: 8px;
    border: 1px solid #444;
  }
  .quiz-step {
    display: none;
  }
  .quiz-step.active {
    display: block;
  }
  .quiz-options {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
    margin-top: 2rem;
  }
  .quiz-option {
    padding: 1rem;
    border: 2px solid #444;
    background: transparent;
    color: white;
    font-size: 1rem;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
  }
  .quiz-option:hover {
    background-color: #FFD700;
    color: #000;
    border-color: #FFD700;
  }
  .quiz-result {
      padding: 2rem;
      border: 2px dashed #FFD700;
      border-radius: 8px;
      margin-top: 2rem;
  }
  .recommended-package {
      font-size: 2rem;
      color: #25d366;
      margin: 1rem 0;
  }

  @media (max-width: 768px) {
    .quiz-section {
      padding: 3rem 1rem;
    }
    .quiz-options {
      display: flex;
      flex-direction: column;
    }
    .quiz-section h2 {
      font-size: 2rem;
    }
  }
</style>

<script>
  document.addEventListener('astro:page-load', () => {
    const quizContainer = document.querySelector('.quiz-container');
    if (!quizContainer) return;

    const steps = quizContainer.querySelectorAll('.quiz-step');
    const options = quizContainer.querySelectorAll('.quiz-option');

    function goToStep(stepNumber: string) {
      steps.forEach(step => {
        step.classList.remove('active');
        if (step.getAttribute('data-step') === stepNumber) {
          step.classList.add('active');
        }
      });
    }

    options.forEach(option => {
      option.addEventListener('click', () => {
        const nextStep = option.getAttribute('data-next-step');
        if (nextStep) {
          goToStep(nextStep);
        }
      });
    });
  });
</script>
</div>
